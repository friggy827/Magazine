<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CL PT</title>
    <style>
        :root { 
            --w: 450px; 
            --h: 600px; /* 3:4 Aspect Ratio */
            --speed: 0.8s; 
        }
        
        body { 
            background: #000; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
            perspective: 2000px; 
            font-family: sans-serif; 
            overflow: hidden;
            touch-action: manipulation;
        }
        
        .book { 
            position: relative; 
            width: var(--w); 
            height: var(--h); 
            transform-style: preserve-3d; 
            transition: transform 0.6s ease; 
            cursor: pointer; 
        }
        
        .page { 
            position: absolute; width: 100%; height: 100%; top: 0; left: 0; 
            transform-origin: left; transform-style: preserve-3d; 
            transition: transform var(--speed) ease-in-out; 
        }
        
        .front, .back { 
            position: absolute; width: 100%; height: 100%; 
            backface-visibility: hidden !important; 
            -webkit-backface-visibility: hidden !important; 
            background: #ffffff; 
            display: flex; align-items: flex-end; 
            padding: 30px; box-sizing: border-box;
            border: 1px solid #ccc;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .front::after {
            content: ''; position: absolute; top: 0; left: 0; width: 40px; height: 100%;
            background: linear-gradient(to right, rgba(0,0,0,0.05), transparent);
        }
        .back::after {
            content: ''; position: absolute; top: 0; right: 0; width: 40px; height: 100%;
            background: linear-gradient(to left, rgba(0,0,0,0.05), transparent);
        }

        .front { z-index: 2; transform: translateZ(0.5px); }
        .back { transform: rotateY(180deg) translateZ(0.5px); }

        .num { 
            position: relative; z-index: 10; color: #777; 
            font-size: 13px; letter-spacing: 1px; font-weight: bold; 
        }
        
        .page.flipped { transform: rotateY(-180deg); }

        #p1 { z-index: 5; } #p2 { z-index: 4; } #p3 { z-index: 3; } #p4 { z-index: 2; } #p5 { z-index: 1; }

        /* FIXED MOBILE ASPECT RATIO */
        @media (max-width: 768px) {
            :root { 
                --w: 42vw; 
                --h: calc(42vw * 1.4); /* Maintains the 1:1.4 magazine ratio */
            }
            .book {
                left: -21vw; 
            }
            .front, .back { padding: 15px; }
            .num { font-size: 10px; }
        }
    </style>
</head>
<body>

<div class="book" id="book">
    <div class="page" id="p1" onclick="handleFlip(this, 1)">
        <div class="front"></div>
        <div class="back"><span class="num">01</span></div>
    </div>
    <div class="page" id="p2" onclick="handleFlip(this, 2)">
        <div class="front"><span class="num" style="margin-left:auto">02</span></div>
        <div class="back"><span class="num">03</span></div>
    </div>
    <div class="page" id="p3" onclick="handleFlip(this, 3)">
        <div class="front"><span class="num" style="margin-left:auto">04</span></div>
        <div class="back"><span class="num">05</span></div>
    </div>
    <div class="page" id="p4" onclick="handleFlip(this, 4)">
        <div class="front"><span class="num" style="margin-left:auto">06</span></div>
        <div class="back"><span class="num">07</span></div>
    </div>
    <div class="page" id="p5" onclick="handleFlip(this, 5)">
        <div class="front"><span class="num" style="margin-left:auto">08</span></div>
        <div class="back"></div>
    </div>
</div>

<script>
    function handleFlip(page, pageIndex) {
        const book = document.getElementById('book');
        const isMobile = window.innerWidth <= 768;
        page.classList.toggle('flipped');

        if (pageIndex === 1) {
            if (page.classList.contains('flipped')) {
                book.style.transform = isMobile ? "translateX(42vw)" : "translateX(50%)";
            } else {
                book.style.transform = "translateX(0%)";
            }
        }
        updateZIndex();
    }

    function updateZIndex() {
        const pages = document.querySelectorAll('.page');
        pages.forEach((page, index) => {
            if (page.classList.contains('flipped')) {
                page.style.zIndex = index + 1;
            } else {
                page.style.zIndex = pages.length - index;
            }
        });
    }
</script>

</body>
</html>

